<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Piel Canela</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500&display=swap');

body {
    margin: 0;
    height: 100vh;
    background: #050505;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Playfair Display', serif;
    color: #f5f5f5;
    overflow: hidden;
}
#galaxy {
  position: fixed;
  inset: 0;
  z-index: 0;
}
.lyrics { z-index: 2; }
.play-btn { z-index: 5; }

.player {
  display: none;
}

.lyrics {
  position: relative;
  z-index: 2;

  text-align: center;
  max-width: 85%;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;

  font-size: 1.6rem;
  line-height: 1.4;
  opacity: 0.9;

  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(6px);
  padding: 28px 24px;
  border-radius: 22px;

  transition: all 0.6s ease;
}

.lyrics.active {
  font-size: 2.4rem;
  opacity: 1;
  transform: scale(1.05);
}


.line {
    transition: all 0.5s ease;
    opacity: 0.35;
    font-size: 1.4rem;
}

.line.current {
    font-size: 2.5rem;
    opacity: 1;
    transform: scale(1.05);
}

.line.prev,
.line.next {
    filter: blur(0.3px);
}

@media (max-width: 480px) {
    .line.current {
        font-size: 2rem;
    }
}
.line {
    transition:
        opacity 0.9s ease-in-out,
        transform 0.9s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.9s ease;
}


.fade-out {
    opacity: 0;
    transform: translateY(-14px);
}

.fade-in {
    opacity: 1;
    transform: translateY(0);
}

.line.current {
    position: relative;
}

.line.current {
    position: relative;
}

.line.current .base {
    color: rgba(255,255,255,0.35);
    white-space: nowrap;
}

.line.current .fill {
    position: absolute;
    left: 0;
    top: 0;
    color: #ffffff;
    white-space: nowrap;
    overflow: hidden;
    width: 0%;
    transition: width 0.1s linear;
}


.line.current .base {
    color: rgba(255,255,255,0.35);
}

.line.current .fill {
    color: #ffffff;
    overflow: hidden;
    width: 0%;
    transition: width 0.1s linear;
    
        text-shadow:
      0 0 6px rgba(255,190,210,0.7),
      0 0 14px rgba(255,160,200,0.5),
      0 0 28px rgba(255,120,180,0.35);

}


body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    radial-gradient(2px 2px at 12% 18%, rgba(255,255,255,0.95), transparent),
    radial-gradient(1.5px 1.5px at 25% 75%, rgba(255,220,230,0.85), transparent),
    radial-gradient(2px 2px at 38% 42%, rgba(255,255,255,0.9), transparent),
    radial-gradient(1.5px 1.5px at 55% 15%, rgba(255,230,240,0.8), transparent),
    radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,0.9), transparent),
    radial-gradient(1.5px 1.5px at 82% 32%, rgba(255,220,230,0.85), transparent),
    radial-gradient(2px 2px at 92% 78%, rgba(255,255,255,0.95), transparent),
    radial-gradient(1px 1px at 18% 50%, rgba(255,200,215,0.6), transparent),
    radial-gradient(1px 1px at 60% 85%, rgba(255,200,215,0.6), transparent);
  opacity: 0.75;
  pointer-events: none;
  z-index: 0;
}


body::after {
  content: "";
  position: fixed;
  inset: -35%;
  background:
    radial-gradient(circle at 30% 40%, rgba(255,200,220,0.08), transparent 55%),
    radial-gradient(circle at 70% 60%, rgba(200,200,255,0.06), transparent 60%);
  animation: drift 80s linear infinite;
  pointer-events: none;
  z-index: 0;
}

@keyframes drift {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.play-btn {
  position: fixed;
  bottom: 32px;
  right: 32px;
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ffd1e8, #ff6fae);
  box-shadow:
    0 0 20px rgba(255,120,180,0.6),
    0 0 60px rgba(255,80,150,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  z-index: 5;
  transition: transform 0.4s ease;
}

.play-btn:hover {
  transform: scale(1.08);
}

.play-btn .icon {
  width: 0;
  height: 0;
  border-left: 18px solid #111;
  border-top: 12px solid transparent;
  border-bottom: 12px solid transparent;
  margin-left: 4px;
  transition: all 0.4s ease;
}

.play-btn.playing .icon {
  width: 16px;
  height: 20px;
  border: none;
  background:
    linear-gradient(#111 0 0) left,
    linear-gradient(#111 0 0) right;
  background-size: 6px 100%;
  background-repeat: no-repeat;
  margin-left: 0;
}

.play-btn .orbit {
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.25);
  animation: spin 6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

</style>
</head>

<body>
<canvas id="galaxy"></canvas>

<div class="lyrics">
  <div id="prev" class="line prev"></div>
  <div id="current" class="line current">
  <span class="base"></span>
  <span class="fill"></span>
</div>
  <div id="next" class="line next"></div>
</div>
<div class="play-btn" id="playBtn">
  <div class="orbit"></div>
  <div class="icon"></div>
</div>
<audio id="audio">
  <source src="piel-canela.mp3" type="audio/mpeg">
</audio>

<script>

const timings = [
  { time: 0.5, key: "intro" },

  { time: 16.5, duration: 3.8, key: "v1_l1" },
  { time: 21.0, duration: 3.2, key: "v1_l2" },
  { time: 25.5, duration: 3.2, key: "v1_l3" },
  { time: 29.5, duration: 3.0, key: "v1_l4" },

  { time: 33.5, duration: 3.2, key: "v2_l1" },
  { time: 38.0, duration: 2.8, key: "v2_l2" },
  { time: 42.0, duration: 3.0, key: "v2_l3" },
  { time: 46.0, duration: 3.0, key: "v2_l4" },

  { time: 48.7, duration: 3.2, key: "c1_l1" },
  { time: 53.0, duration: 3.2, key: "c1_l2" },
  { time: 57.0, duration: 3.2, key: "c1_l3" },
  { time: 61.0, duration: 1.6, key: "c1_l4" },

  { time: 65.0, duration: 3.2, key: "c2_l1" },
  { time: 70.0, duration: 3.2, key: "c2_l2" },
  { time: 73.5, duration: 3.2, key: "c2_l3" },
  { time: 78.0, duration: 1.6, key: "c2_l4" },

  { time: 94.0, duration: 3.5, key: "out_l1" },
  { time: 99.0, duration: 3.5, key: "out_l2" }
];
const lyricsText = {
  intro: "",

  v1_l1: "Que se quede el infinito sin estrellas",
  v1_l2: "O que pierda el ancho mar su inmensidad",
  v1_l3: "Pero el negro de tus ojos que no mueran",
  v1_l4: "Y el canela de tu piel se quede igual",

  v2_l1: "Si perdiera el arcoíris su belleza",
  v2_l2: "Y las flores su perfume y su color",
  v2_l3: "No sería tan inmensa mi tristeza",
  v2_l4: "Como aquella de quedarme sin tu amor",

  c1_l1: "Me importas tú, y tú, y tú",
  c1_l2: "y solamente tú, y tú, y tú",
  c1_l3: "Me importas tú, y tú, y tú",
  c1_l4: "y nadie más que tú",

  c2_l1: "Me importas tú, y tú, y tú",
  c2_l2: "y solamente tú, y tú, y tú",
  c2_l3: "Me importas tú, y tú, y tú",
  c2_l4: "y nadie más que tú",

  out_l1: "Ojos negros, piel canela",
  out_l2: "que me llegan a desesperar"
};
function getLineDuration(i) {
  return timings[i].duration || 3;
}

const audio = document.getElementById("audio");

const prevLine = document.getElementById("prev");
const currentLineEl = document.getElementById("current");
const nextLineEl = document.getElementById("next");

let index = 0;
let lastKey = null;

audio.addEventListener("timeupdate", () => {
    if (timings[index]) {
  const start = timings[index].time;
  const duration = getLineDuration(index);

  const progress = Math.min(
    Math.max((audio.currentTime - start) / duration, 0),
    1
  );

  const fill = currentLineEl.querySelector(".fill");
  if (fill) {
    fill.style.width = `${progress * 100}%`;
  }
}

  if (index >= timings.length) return;

  const currentTime = audio.currentTime;
  const currentLine = timings[index];
  const nextLine = timings[index + 1];

  if (
    currentTime >= currentLine.time &&
    (!nextLine || currentTime < nextLine.time)
  ) {
 if (currentLine.key !== lastKey) {
  lastKey = currentLine.key;

  prevLine.classList.add("fade-out");

  setTimeout(() => {
    currentLineEl.classList.add("fade-out");
  }, 120);

  setTimeout(() => {
    nextLineEl.classList.add("fade-out");
  }, 240);

  setTimeout(() => {
    prevLine.textContent =
      lyricsText[timings[index - 1]?.key] || "";

  const text = lyricsText[currentLine.key] || "";
const base = currentLineEl.querySelector(".base");
const fill = currentLineEl.querySelector(".fill");

base.textContent = text;
fill.textContent = text;
fill.style.width = "0%";

    nextLineEl.textContent =
      lyricsText[timings[index + 1]?.key] || "";

    prevLine.classList.remove("fade-out");
    currentLineEl.classList.remove("fade-out");
    nextLineEl.classList.remove("fade-out");

    prevLine.classList.add("fade-in");
    currentLineEl.classList.add("fade-in");
    nextLineEl.classList.add("fade-in");
  }, 420);
}


  }

  if (nextLine && currentTime >= nextLine.time) {
    index++;
  }
});

audio.addEventListener("play", () => {
  index = 0;
  lastKey = null;

  prevLine.textContent = "";
  nextLineEl.textContent = "";

  const base = currentLineEl.querySelector(".base");
  const fill = currentLineEl.querySelector(".fill");

  if (base) base.textContent = "";
  if (fill) fill.textContent = "";
  if (fill) fill.style.width = "0%";
});
const playBtn = document.getElementById("playBtn");

playBtn.addEventListener("click", () => {
  if (audio.paused) {
    audio.play();
    playBtn.classList.add("playing");
  } else {
    audio.pause();
    playBtn.classList.remove("playing");
  }
});

audio.addEventListener("ended", () => {
  playBtn.classList.remove("playing");
});
const canvas = document.getElementById("galaxy");
const ctx = canvas.getContext("2d");

let w, h;
function resize() {
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

const stars = Array.from({ length: 220 }, () => ({
  x: Math.random() * w,
  y: Math.random() * h,
  r: Math.random() * 1.8 + 0.4,
  s: Math.random() * 0.4 + 0.1,
  o: Math.random() * 0.6 + 0.2
}));

function draw() {
  ctx.clearRect(0, 0, w, h);

  for (const star of stars) {
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,200,220,${star.o})`;
    ctx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
    ctx.fill();

    star.y += star.s;
    if (star.y > h) {
      star.y = 0;
      star.x = Math.random() * w;
    }
  }

  requestAnimationFrame(draw);
}

draw();

;
</script>
</body>
</html>